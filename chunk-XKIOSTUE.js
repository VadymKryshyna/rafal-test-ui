import{a as v}from"./chunk-A3H755GS.js";import{tb as k}from"./chunk-DTJFR5RR.js";import{u as g}from"./chunk-VZZUZLMA.js";import{D as m,Ia as a,Pc as d,_ as f,ba as o,ha as n,m as s,n as p,r as u}from"./chunk-KP2EPHGH.js";var i=!0,w=(()=>{class r{environment=n(k);httpClient=n(g);login(e){if(i){let h=localStorage.getItem("rafal_1"),c={name:"user_name",email:e.email,role:v.INFLUENCER,startPage:"/inf/onboarding"};if(h){let l=JSON.parse(h);c.name=l.firstName+" "+l.lastName,c.email=l.email}return s({user:c,accessToken:"accessToken",refreshToken:"refreshToken"})}return this.httpClient.post(`${this.environment.apiUrl}auth/login`,e).pipe(u(t=>t))}logout(){return i?(localStorage.clear(),s(!0)):this.httpClient.get(`${this.environment.apiUrl}auth/logout`)}changePassword(e){return i?s(!0):this.httpClient.post(`${this.environment.apiUrl}auth/change-password`,e)}resetPassword(e){return i?s(!0):this.httpClient.post(`${this.environment.apiUrl}auth/reset-password`,e)}remindPassword(e){return i?s({status:1}):this.httpClient.post(`${this.environment.apiUrl}auth/remind-password`,{email:e}).pipe(u(t=>t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var R=(()=>{class r{authenticationService=n(w);accessToken=a(null);refreshToken=a(null);user=a(null);isAuthenticated=d(()=>!!this.accessToken());login(e){return this.authenticationService.login(e).pipe(f(t=>{this.setSession(t)}),m(t=>(this.clearSession(),p(()=>t.error))))}logout(){return this.authenticationService.logout()}changePassword(e){return this.authenticationService.changePassword(e)}remindPassword(e){return this.authenticationService.remindPassword(e)}resetPassword(e){return this.authenticationService.resetPassword(e)}setSession(e){this.accessToken.set(e.accessToken),this.refreshToken.set(e.refreshToken),this.user.set(e.user)}clearSession(){this.accessToken.set(null),this.refreshToken.set(null),this.user.set(null)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();export{R as a};
