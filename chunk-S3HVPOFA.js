import{a as O}from"./chunk-XKIOSTUE.js";import{a as E,b as Y}from"./chunk-QV5HBWRY.js";import"./chunk-A3H755GS.js";import{O as X,a as j,b as H,c as W,e as U,g as z,t as J,u as K,v as Q}from"./chunk-UXOTDRWJ.js";import{$ as I,Ja as R,Ka as b,L as k,M as P,Ra as G,Sa as V,ba as h,ea as F,fa as A,ga as L,ia as x,ka as B,la as N,na as q,qa as D}from"./chunk-DTJFR5RR.js";import"./chunk-VZZUZLMA.js";import{Ab as c,Bc as m,Cc as p,Hb as u,Ia as S,Nb as d,Pc as T,Rb as t,Sb as n,Tb as f,bc as y,cc as g,ha as M,ib as o,nc as i,oc as C,pc as v,vb as w,wc as _}from"./chunk-KP2EPHGH.js";import"./chunk-GAL4ENT6.js";var ne=()=>["/"],$=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275cmp=w({type:e,selectors:[["app-error"]],decls:10,vars:2,consts:[[1,"blank-layout-container","justify-content-center"],[1,"row"],[1,"col-12","text-center"],["src","/apps/instars/src/assets/images/backgrounds/errorimg.svg","alt","error-bg","width","500"],[1,"auth-title","f-w-600"],[1,"f-s-20","f-w-600","m-y-30"],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),f(3,"img",3),t(4,"h2",4),i(5,"Opps!!!"),n(),t(6,"h6",5),i(7,"This page you are looking for could not be found."),n(),t(8,"a",6),i(9,"Go back to Home"),n()()()()),a&2&&(o(8),u("routerLink",_(1,ne)))},dependencies:[P,b],encapsulation:2})}return e})();var oe=()=>["/dashboards/dashboard1"],ee=(()=>{class e{static \u0275fac=function(a){return new(a||e)};static \u0275cmp=w({type:e,selectors:[["app-maintenance"]],decls:10,vars:2,consts:[[1,"blank-layout-container","justify-content-center"],[1,"row"],[1,"col-12","text-center"],["src","/apps/instars/src/assets/images/backgrounds/maintenance.svg","alt","error-bg"],[1,"auth-title","f-w-600"],[1,"f-s-20","f-w-600","m-b-30"],["mat-flat-button","",3,"routerLink"]],template:function(a,s){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),f(3,"img",3),t(4,"h2",4),i(5,"Maintenance Mode!!!"),n(),t(6,"h6",5),i(7,"Website is Under Construction. Check back later!"),n(),t(8,"a",6),i(9,"Go back to Home"),n()()()()),a&2&&(o(8),u("routerLink",_(1,oe)))},dependencies:[P,b],encapsulation:2})}return e})();function ie(e,l){e&1&&(t(0,"div",14),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"Required")))}function re(e,l){if(e&1&&(t(0,"mat-hint",6),c(1,ie,3,3,"div",14),n()),e&2){let r=g();o(),d(r.formControls.currentPassword.errors&&r.formControls.currentPassword.errors.required?1:-1)}}function ae(e,l){e&1&&(t(0,"div",14),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"Password required")))}function se(e,l){e&1&&(t(0,"div",14),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"Password pattern required")))}function de(e,l){if(e&1&&(t(0,"mat-hint",6),c(1,ae,3,3,"div",14)(2,se,3,3,"div",14),n()),e&2){let r=g();o(),d(r.formControls.password.errors&&r.formControls.password.errors.required?1:-1),o(),d(r.formControls.password.errors&&r.formControls.password.errors.pattern?2:-1)}}function me(e,l){e&1&&(t(0,"mat-error",8),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"The passwords are not identical")))}function pe(e,l){e&1&&(t(0,"div",14),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"Required")))}function le(e,l){e&1&&(t(0,"div",14),i(1),m(2,"translate"),n()),e&2&&(o(),C(p(2,1,"Password pattern required")))}function ce(e,l){if(e&1&&(t(0,"mat-hint",6),c(1,pe,3,3,"div",14)(2,le,3,3,"div",14),n()),e&2){let r=g();o(),d(r.formControls.repeatPassword.errors&&r.formControls.repeatPassword.errors.required?1:-1),o(),d(r.formControls.repeatPassword.errors&&r.formControls.repeatPassword.errors.pattern?2:-1)}}function fe(e,l){e&1&&(t(0,"span",13),i(1,"loading"),n())}function ue(e,l){e&1&&(i(0),m(1,"translate")),e&2&&v(" ",p(1,1,"Save")," ")}var te=(()=>{class e{router=M(R);authenticationFacade=M(O);isLoading=S(!1);errorMessage=S(null);hasError=T(()=>!!this.errorMessage());form=new L({currentPassword:new x(null,[h.required]),password:new x(null,[h.required,h.pattern(E)]),repeatPassword:new x(null,[h.required,h.pattern(E)])},{validators:[Y]});ngOnInit(){this.form.setValue({currentPassword:null,password:null,repeatPassword:null})}get formControls(){return this.form.controls}get hasMismatchedPasswords(){return this.form.errors?.passwordMismatch&&this.formControls.repeatPassword.touched}changePassword(){if(this.form.invalid){window.alert("Please provide data");return}let r={currentPassword:this.form.value.currentPassword??"",password:this.form.value.password??""};this.isLoading.set(!0),this.authenticationFacade.changePassword(r).subscribe({next:()=>{this.isLoading.set(!1),this.router.navigateByUrl("/")},error:a=>{this.isLoading.set(!1),this.errorMessage.set(a?.[0]?.message||"Change password failed. Please try again.")}})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=w({type:e,selectors:[["app-change-password"]],decls:28,vars:16,consts:[[1,"cardWithShadow","theme-card"],[1,"p-y-24"],[3,"formGroup"],[1,"f-s-14","f-w-600","m-b-8","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","type","password","placeholder","Current password","formControlName","currentPassword"],[1,"m-b-16","error-msg"],["matInput","","type","password","placeholder","New password","formControlName","password"],[1,"m-b-16"],["appearance","outline","color","primary",1,"w-100","hide-hint"],["matInput","","type","password","placeholder","Repeat new password","formControlName","repeatPassword"],[1,"text-right","p-24","p-t-0"],["mat-flat-button","","color","primary",1,"m-r-8",3,"click","disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","m-r-8"],[1,"text-error"]],template:function(a,s){a&1&&(t(0,"mat-card",0)(1,"mat-card-content",1)(2,"mat-card-title"),i(3,"Change Password"),n(),t(4,"form",2)(5,"mat-label",3),i(6),m(7,"translate"),n(),t(8,"mat-form-field",4),f(9,"input",5),c(10,re,2,1,"mat-hint",6),n(),t(11,"mat-label",3),i(12),m(13,"translate"),n(),t(14,"mat-form-field",4),f(15,"input",7),c(16,de,3,2,"mat-hint",6),n(),c(17,me,3,3,"mat-error",8),t(18,"mat-label",3),i(19),m(20,"translate"),n(),t(21,"mat-form-field",9),f(22,"input",10),c(23,ce,3,2,"mat-hint",6),n()()(),t(24,"div",11)(25,"button",12),y("click",function(){return s.changePassword()}),c(26,fe,2,0,"span",13)(27,ue,2,3),n()()()),a&2&&(o(4),u("formGroup",s.form),o(2),v(" ",p(7,10,"Current Password")," "),o(4),d(s.formControls.currentPassword.touched&&s.formControls.currentPassword.invalid?10:-1),o(2),v(" ",p(13,12,"New Password")," "),o(4),d(s.formControls.password.touched&&s.formControls.password.invalid?16:-1),o(),d(s.hasMismatchedPasswords?17:-1),o(2),v(" ",p(20,14,"Confirm Password")," "),o(4),d(s.formControls.repeatPassword.touched&&s.formControls.repeatPassword.invalid?23:-1),o(2),u("disabled",!s.form.valid&&!s.isLoading()),o(),d(s.isLoading()?26:27))},dependencies:[X,U,j,W,H,z,J,Q,K,k,V,G,D,B,I,F,A,N,q],encapsulation:2})}return e})();var Oe=[{path:"error",component:$},{path:"maintenance",component:ee},{path:"change-password",component:te}];export{Oe as SharedRoutes};
